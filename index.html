function fazerLogin() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;
    const status = document.getElementById('status');
    const btn = document.getElementById('btnAcessar');

    if(!email || !pass) { alert("Preencha e-mail e senha!"); return; }
    if(pass.length < 6) { alert("A senha deve ter no mínimo 6 dígitos!"); return; }

    status.innerText = "VERIFICANDO...";
    btn.disabled = true;

    // Tenta Logar
    auth.signInWithEmailAndPassword(email, pass)
        .then(() => {
            window.location.href = "dashboard.html";
        })
        .catch((error) => {
            // Se o usuário não existe, tenta Criar
            if (error.code === 'auth/user-not-found' || error.code === 'auth/invalid-credential') {
                status.innerText = "CRIANDO SUA CONTA FOCO...";
                
                auth.createUserWithEmailAndPassword(email, pass)
                    .then((res) => {
                        // Cria o perfil inicial no banco
                        db.collection("users").doc(res.user.uid).set({
                            email: email,
                            coins: 0,
                            username: "",
                            created: firebase.firestore.FieldValue.serverTimestamp()
                        }).then(() => {
                            window.location.href = "dashboard.html";
                        });
                    })
                    .catch((err) => {
                        status.innerText = "ERRO AO CRIAR: " + err.message;
                        btn.disabled = false;
                    });
            } else {
                status.innerText = "ERRO: " + error.message;
                btn.disabled = false;
            }
        });
}
